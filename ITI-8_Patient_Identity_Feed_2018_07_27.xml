<channel version="3.5.2">
  <id>e68dbbfd-ce38-494c-b1cd-342ee28fd472</id>
  <nextMetaDataId>2</nextMetaDataId>
  <name>ITI-8_generation</name>
  <description></description>
  <revision>43</revision>
  <sourceConnector version="3.5.2">
    <metaDataId>0</metaDataId>
    <name>sourceConnector</name>
    <properties class="com.mirth.connect.connectors.vm.VmReceiverProperties" version="3.5.2">
      <pluginProperties/>
      <sourceConnectorProperties version="3.5.2">
        <responseVariable>None</responseVariable>
        <respondAfterProcessing>true</respondAfterProcessing>
        <processBatch>false</processBatch>
        <firstResponse>false</firstResponse>
        <processingThreads>1</processingThreads>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
        <queueBufferSize>1000</queueBufferSize>
      </sourceConnectorProperties>
    </properties>
    <transformer version="3.5.2">
      <elements>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
          <name>MSH &amp; EVN mapping</name>
          <sequenceNumber>0</sequenceNumber>
          <script>var msgOut = new XML(&quot;&lt;HL7Message&gt;&lt;/HL7Message&gt;&quot;);

var messageHeader = new XML(&apos;&lt;MSH/&gt;&apos;)
messageHeader[&apos;MSH.1&apos;] 			 = &apos;|&apos;;
messageHeader[&apos;MSH.2&apos;] 			 = &apos;^~\\&amp;&apos;;
messageHeader[&apos;MSH.3&apos;][&apos;MSH.3.1&apos;] 	 = msg[&apos;message_information&apos;][&apos;sender_application&apos;];
messageHeader[&apos;MSH.4&apos;][&apos;MSH.4.1&apos;] 	 = msg[&apos;message_information&apos;][&apos;sender_facility&apos;];
messageHeader[&apos;MSH.5&apos;][&apos;MSH.5.1&apos;] 	 = msg[&apos;message_information&apos;][&apos;receiving_application&apos;];
messageHeader[&apos;MSH.6&apos;][&apos;MSH.6.1&apos;] 	 = msg[&apos;message_information&apos;][&apos;receiving_facility&apos;];
messageHeader[&apos;MSH.7&apos;][&apos;MSH.7.1&apos;] 	 = msg[&apos;message_information&apos;][&apos;message_date_time&apos;];
messageHeader[&apos;MSH.9&apos;][&apos;MSH.9.1&apos;] 	 = &apos;ADT&apos;;
messageHeader[&apos;MSH.9&apos;][&apos;MSH.9.2&apos;] 	 = msg[&apos;message_information&apos;][&apos;message_event_type&apos;];
messageHeader[&apos;MSH.10&apos;][&apos;MSH.10.1&apos;] = msg[&apos;message_information&apos;][&apos;message_extension_id&apos;];
messageHeader[&apos;MSH.11&apos;][&apos;MSH.11.1&apos;] = &apos;T&apos;;
messageHeader[&apos;MSH.12&apos;][&apos;MSH.12.1&apos;] = &apos;2.5&apos;;
var generateMessageHeader = msgOut.appendChild(messageHeader);


var eventType = new XML(&apos;&lt;EVN/&gt;&apos;)
eventType[&apos;EVN.1&apos;][&apos;EVN.1.1&apos;] = msg[&apos;message_information&apos;][&apos;message_event_type&apos;];
eventType[&apos;EVN.2&apos;][&apos;EVN.2.1&apos;] = DateUtil.getCurrentDate(&apos;YYYYMMddHHmmss&apos;);
var generateEventType = generateMessageHeader.appendChild(eventType);</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
          <name>PID mapping</name>
          <sequenceNumber>1</sequenceNumber>
          <script>var patientInformation = new XML(&apos;&lt;PID/&gt;&apos;);

patientInformation[&apos;PID.1&apos;][&apos;PID.1.1&apos;] = &apos;1&apos;;
patientInformation[&apos;PID.2&apos;][&apos;PID.2.1&apos;] = msg[&apos;patient_information&apos;][&apos;patient_id&apos;];
patientInformation[&apos;PID.4&apos;][&apos;PID.4.1&apos;] = msg[&apos;patient_information&apos;][&apos;alternate_patient_id&apos;];

patientInformation[&apos;PID.5&apos;][&apos;PID.5.1&apos;] = msg[&apos;patient_information&apos;][&apos;patient_name&apos;][&apos;given_name&apos;];
patientInformation[&apos;PID.5&apos;][&apos;PID.5.2&apos;] = msg[&apos;patient_information&apos;][&apos;patient_name&apos;][&apos;family_name&apos;];
patientInformation[&apos;PID.5&apos;][&apos;PID.5.3&apos;] = msg[&apos;patient_information&apos;][&apos;patient_name&apos;][&apos;middle_name&apos;];
patientInformation[&apos;PID.5&apos;][&apos;PID.5.4&apos;] = msg[&apos;patient_information&apos;][&apos;patient_name&apos;][&apos;suffix_name&apos;];
patientInformation[&apos;PID.5&apos;][&apos;PID.5.5&apos;] = msg[&apos;patient_information&apos;][&apos;patient_name&apos;][&apos;prefix_name&apos;];
patientInformation[&apos;PID.5&apos;][&apos;PID.5.6&apos;] = msg[&apos;patient_information&apos;][&apos;patient_name&apos;][&apos;degree_name&apos;];

patientInformation[&apos;PID.7&apos;][&apos;PID.7.1&apos;] = msg[&apos;patient_information&apos;][&apos;date_of_birth&apos;];
patientInformation[&apos;PID.8&apos;][&apos;PID.8.1&apos;] = msg[&apos;patient_information&apos;][&apos;gender&apos;];

patientInformation[&apos;PID.11&apos;][&apos;PID.11.1&apos;] = msg[&apos;patient_information&apos;][&apos;patient_address&apos;][&apos;street_adress&apos;];
patientInformation[&apos;PID.11&apos;][&apos;PID.11.2&apos;] = msg[&apos;patient_information&apos;][&apos;patient_address&apos;][&apos;other_identifications&apos;];
patientInformation[&apos;PID.11&apos;][&apos;PID.11.3&apos;] = msg[&apos;patient_information&apos;][&apos;patient_address&apos;][&apos;city&apos;];
patientInformation[&apos;PID.11&apos;][&apos;PID.11.4&apos;] = msg[&apos;patient_information&apos;][&apos;patient_address&apos;][&apos;state&apos;];
patientInformation[&apos;PID.11&apos;][&apos;PID.11.5&apos;] = msg[&apos;patient_information&apos;][&apos;patient_address&apos;][&apos;postal_code&apos;];
patientInformation[&apos;PID.11&apos;][&apos;PID.11.6&apos;] = msg[&apos;patient_information&apos;][&apos;patient_address&apos;][&apos;country&apos;];
patientInformation[&apos;PID.11&apos;][&apos;PID.11.7&apos;] = msg[&apos;patient_information&apos;][&apos;patient_address&apos;][&apos;address_type&apos;];
patientInformation[&apos;PID.12&apos;][&apos;PID.12.1&apos;] = msg[&apos;patient_information&apos;][&apos;patient_address&apos;][&apos;country&apos;];

var split_language = msg[&apos;patient_information&apos;][&apos;patient_laguage&apos;].split(&apos;:&apos;);
patientInformation[&apos;PID.15&apos;][&apos;PID.15.1&apos;] = split_language[0];
patientInformation[&apos;PID.15&apos;][&apos;PID.15.2&apos;] = split_language[1];
patientInformation[&apos;PID.15&apos;][&apos;PID.15.3&apos;] = split_language[2];

patientInformation[&apos;PID.16&apos;][&apos;PID.16.1&apos;] = msg[&apos;patient_information&apos;][&apos;patient_marital_status&apos;];
patientInformation[&apos;PID.17&apos;][&apos;PID.17.1&apos;] = msg[&apos;patient_information&apos;][&apos;patient_religion&apos;];
patientInformation[&apos;PID.18&apos;][&apos;PID.18.1&apos;] = msg[&apos;patient_information&apos;][&apos;patient_account_number&apos;];
patientInformation[&apos;PID.19&apos;][&apos;PID.19.1&apos;] = msg[&apos;patient_information&apos;][&apos;patient_ssn&apos;];
patientInformation[&apos;PID.22&apos;][&apos;PID.22.1&apos;] = msg[&apos;patient_information&apos;][&apos;patient_ethinic_group&apos;];
patientInformation[&apos;PID.26&apos;][&apos;PID.26.1&apos;] = msg[&apos;patient_information&apos;][&apos;patient_citizenship_code&apos;];
patientInformation[&apos;PID.29&apos;][&apos;PID.29.1&apos;] = msg[&apos;patient_information&apos;][&apos;patient_death_date_time&apos;];
patientInformation[&apos;PID.30&apos;][&apos;PID.30.1&apos;] = msg[&apos;patient_information&apos;][&apos;patient_death_indicator&apos;];

var generatePatientInfo = generateEventType.appendChild(patientInformation);</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
          <name>NK1 mapping</name>
          <sequenceNumber>2</sequenceNumber>
          <script>var next_of_kin_length = parseInt(msg[&apos;patient_next_of_kin&apos;].length);

for(i=0;i&lt;next_of_kin_length;i++){
	
	var nextOfKin = new XML(&apos;&lt;NK1/&gt;&apos;);
	
	nextOfKin[&apos;NK1.1&apos;][&apos;NK1.1.1&apos;] = i+1;
	
	nextOfKin[&apos;NK1.2&apos;][&apos;NK1.2.1&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_name&apos;][&apos;family_name&apos;]
	nextOfKin[&apos;NK1.2&apos;][&apos;NK1.2.2&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_name&apos;][&apos;given_name&apos;]
	nextOfKin[&apos;NK1.2&apos;][&apos;NK1.2.3&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_name&apos;][&apos;middle_name&apos;]
	nextOfKin[&apos;NK1.2&apos;][&apos;NK1.2.4&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_name&apos;][&apos;prefix_name&apos;];
	nextOfKin[&apos;NK1.2&apos;][&apos;NK1.2.5&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_name&apos;][&apos;suffix_name&apos;];
	nextOfKin[&apos;NK1.2&apos;][&apos;NK1.2.6&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_name&apos;][&apos;degree_name&apos;];
	
	nextOfKin[&apos;NK1.3&apos;][&apos;NK1.3.1&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_relationship&apos;];
	
	nextOfKin[&apos;NK1.4&apos;][&apos;NK1.4.1&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_address&apos;][&apos;street_adress&apos;];
	nextOfKin[&apos;NK1.4&apos;][&apos;NK1.4.2&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_address&apos;][&apos;other_identifications&apos;]
	nextOfKin[&apos;NK1.4&apos;][&apos;NK1.4.3&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_address&apos;][&apos;city&apos;];
	nextOfKin[&apos;NK1.4&apos;][&apos;NK1.4.4&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_address&apos;][&apos;state&apos;];
	nextOfKin[&apos;NK1.4&apos;][&apos;NK1.4.5&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_address&apos;][&apos;postal_code&apos;];
	nextOfKin[&apos;NK1.4&apos;][&apos;NK1.4.6&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_address&apos;][&apos;country&apos;];
	nextOfKin[&apos;NK1.4&apos;][&apos;NK1.4.7&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_address&apos;][&apos;address_type&apos;];
	
	nextOfKin[&apos;NK1.5&apos;][&apos;NK1.5.1&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;phone_number&apos;][&apos;home_phone&apos;];
	nextOfKin[&apos;NK1.6&apos;][&apos;NK1.6.1&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;phone_number&apos;][&apos;work_phone&apos;];
	nextOfKin[&apos;NK1.8&apos;][&apos;NK1.8.1&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;start_date_of_contact&apos;];
	nextOfKin[&apos;NK1.9&apos;][&apos;NK1.9.1&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;end_date_of_contact&apos;];
	nextOfKin[&apos;NK1.15&apos;][&apos;NK1.15.1&apos;] = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_gender&apos;];
	var split_language = msg[&apos;patient_next_of_kin&apos;][i][&apos;patient_contact_person_language&apos;].split(&apos;:&apos;);
	nextOfKin[&apos;NK1.20&apos;][&apos;NK1.20.1&apos;] = split_language[0];
	nextOfKin[&apos;NK1.20&apos;][&apos;NK1.20.2&apos;] = split_language[1];
	nextOfKin[&apos;NK1.20&apos;][&apos;NK1.20.3&apos;] = split_language[2];
	var generateNextOfKin = generatePatientInfo.appendChild(nextOfKin);
	
}</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
          <name>PD1 mapping</name>
          <sequenceNumber>3</sequenceNumber>
          <script>var patientDemographics = new XML(&apos;&lt;PD1/&gt;&apos;);

patientDemographics[&apos;PD1.1&apos;][&apos;PD1.1.1&apos;]=&apos;1&apos;;
var primary_facility = msg[&apos;patient_demographics_information&apos;][&apos;patient_primary_facility&apos;].split(&apos;:&apos;);
patientDemographics[&apos;PD1.3&apos;][&apos;PD1.3.1&apos;]=primary_facility[0];
patientDemographics[&apos;PD1.3&apos;][&apos;PD1.3.2&apos;]=primary_facility[1];
patientDemographics[&apos;PD1.3&apos;][&apos;PD1.3.3&apos;]=primary_facility[2];

patientDemographics[&apos;PD1.4&apos;][&apos;PD1.4.1&apos;]=msg[&apos;patient_demographics_information&apos;][&apos;patient_primary_care_provider&apos;][&apos;care_provider_id&apos;];
patientDemographics[&apos;PD1.4&apos;][&apos;PD1.4.2&apos;]=msg[&apos;patient_demographics_information&apos;][&apos;patient_primary_care_provider&apos;][&apos;family_name&apos;];
patientDemographics[&apos;PD1.4&apos;][&apos;PD1.4.3&apos;]=msg[&apos;patient_demographics_information&apos;][&apos;patient_primary_care_provider&apos;][&apos;given_name&apos;];
patientDemographics[&apos;PD1.4&apos;][&apos;PD1.4.4&apos;]=msg[&apos;patient_demographics_information&apos;][&apos;patient_primary_care_provider&apos;][&apos;middle_name&apos;];
patientDemographics[&apos;PD1.4&apos;][&apos;PD1.4.5&apos;]=msg[&apos;patient_demographics_information&apos;][&apos;patient_primary_care_provider&apos;][&apos;prefix_name&apos;];
patientDemographics[&apos;PD1.4&apos;][&apos;PD1.4.6&apos;]=msg[&apos;patient_demographics_information&apos;][&apos;patient_primary_care_provider&apos;][&apos;suffix_name&apos;];
patientDemographics[&apos;PD1.4&apos;][&apos;PD1.4.7&apos;]=msg[&apos;patient_demographics_information&apos;][&apos;patient_primary_care_provider&apos;][&apos;degree_name&apos;];

patientDemographics[&apos;PD1.6&apos;][&apos;PD1.6.1&apos;]=msg[&apos;patient_demographics_information&apos;][&apos;patient_is_handicap&apos;];
patientDemographics[&apos;PD1.7&apos;][&apos;PD1.7.1&apos;]=msg[&apos;patient_demographics_information&apos;][&apos;patient_protection_indicator&apos;];

var generatePatientDemograhics = generatePatientInfo.appendChild(patientDemographics);</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
          <name>PV1 mapping</name>
          <sequenceNumber>4</sequenceNumber>
          <script>var patientVisitData = new XML(&apos;&lt;PV1/&gt;&apos;);

patientVisitData[&apos;PV1.1&apos;][&apos;PV1.1.1&apos;] = &apos;1&apos;;
patientVisitData[&apos;PV1.2&apos;][&apos;PV1.2.1&apos;] = msg[&apos;patient_visit_information&apos;][&apos;admission_type&apos;];

var patient_location = msg[&apos;patient_visit_information&apos;][&apos;assinged_patient_location&apos;].split(&apos;:&apos;);
patientVisitData[&apos;PV1.3&apos;][&apos;PV1.3.1&apos;] = patient_location[0];
patientVisitData[&apos;PV1.3&apos;][&apos;PV1.3.2&apos;] = patient_location[1];
patientVisitData[&apos;PV1.3&apos;][&apos;PV1.3.3&apos;] = patient_location[2];

patientVisitData[&apos;PV1.7&apos;][&apos;PV1.7.1&apos;] = msg[&apos;patient_visit_information&apos;][&apos;attending_doctor&apos;][&apos;doctor_id&apos;];
patientVisitData[&apos;PV1.7&apos;][&apos;PV1.7.2&apos;] = msg[&apos;patient_visit_information&apos;][&apos;attending_doctor&apos;][&apos;family_name&apos;];
patientVisitData[&apos;PV1.7&apos;][&apos;PV1.7.3&apos;] = msg[&apos;patient_visit_information&apos;][&apos;attending_doctor&apos;][&apos;given_name&apos;];
patientVisitData[&apos;PV1.7&apos;][&apos;PV1.7.4&apos;] = msg[&apos;patient_visit_information&apos;][&apos;attending_doctor&apos;][&apos;middle_name&apos;];
patientVisitData[&apos;PV1.7&apos;][&apos;PV1.7.5&apos;] = msg[&apos;patient_visit_information&apos;][&apos;attending_doctor&apos;][&apos;prefix_name&apos;];
patientVisitData[&apos;PV1.7&apos;][&apos;PV1.7.6&apos;] = msg[&apos;patient_visit_information&apos;][&apos;attending_doctor&apos;][&apos;suffix_name&apos;];
patientVisitData[&apos;PV1.7&apos;][&apos;PV1.7.7&apos;] = msg[&apos;patient_visit_information&apos;][&apos;attending_doctor&apos;][&apos;degree_name&apos;];

patientVisitData[&apos;PV1.8&apos;][&apos;PV1.8.1&apos;] = msg[&apos;patient_visit_information&apos;][&apos;referring_doctor&apos;][&apos;doctor_id&apos;];
patientVisitData[&apos;PV1.8&apos;][&apos;PV1.8.2&apos;] = msg[&apos;patient_visit_information&apos;][&apos;referring_doctor&apos;][&apos;family_name&apos;];
patientVisitData[&apos;PV1.8&apos;][&apos;PV1.8.3&apos;] = msg[&apos;patient_visit_information&apos;][&apos;referring_doctor&apos;][&apos;given_name&apos;];
patientVisitData[&apos;PV1.8&apos;][&apos;PV1.8.4&apos;] = msg[&apos;patient_visit_information&apos;][&apos;referring_doctor&apos;][&apos;middle_name&apos;];
patientVisitData[&apos;PV1.8&apos;][&apos;PV1.8.5&apos;] = msg[&apos;patient_visit_information&apos;][&apos;referring_doctor&apos;][&apos;prefix_name&apos;];
patientVisitData[&apos;PV1.8&apos;][&apos;PV1.8.6&apos;] = msg[&apos;patient_visit_information&apos;][&apos;referring_doctor&apos;][&apos;suffix_name&apos;];
patientVisitData[&apos;PV1.8&apos;][&apos;PV1.8.7&apos;] = msg[&apos;patient_visit_information&apos;][&apos;referring_doctor&apos;][&apos;degree_name&apos;];

patientVisitData[&apos;PV1.9&apos;][&apos;PV1.9.1&apos;] = msg[&apos;patient_visit_information&apos;][&apos;consulting_doctor&apos;][&apos;doctor_id&apos;];
patientVisitData[&apos;PV1.9&apos;][&apos;PV1.9.2&apos;] = msg[&apos;patient_visit_information&apos;][&apos;consulting_doctor&apos;][&apos;family_name&apos;];
patientVisitData[&apos;PV1.9&apos;][&apos;PV1.9.3&apos;] = msg[&apos;patient_visit_information&apos;][&apos;consulting_doctor&apos;][&apos;given_name&apos;];
patientVisitData[&apos;PV1.9&apos;][&apos;PV1.9.4&apos;] = msg[&apos;patient_visit_information&apos;][&apos;consulting_doctor&apos;][&apos;middle_name&apos;];
patientVisitData[&apos;PV1.9&apos;][&apos;PV1.9.5&apos;] = msg[&apos;patient_visit_information&apos;][&apos;consulting_doctor&apos;][&apos;prefix_name&apos;];
patientVisitData[&apos;PV1.9&apos;][&apos;PV1.9.6&apos;] = msg[&apos;patient_visit_information&apos;][&apos;consulting_doctor&apos;][&apos;suffix_name&apos;];
patientVisitData[&apos;PV1.9&apos;][&apos;PV1.9.7&apos;] = msg[&apos;patient_visit_information&apos;][&apos;consulting_doctor&apos;][&apos;degree_name&apos;];

patientVisitData[&apos;PV1.10&apos;][&apos;PV1.10.1&apos;] = msg[&apos;patient_visit_information&apos;][&apos;hospital_service&apos;];
patientVisitData[&apos;PV1.14&apos;][&apos;PV1.14.1&apos;] = msg[&apos;patient_visit_information&apos;][&apos;admit_source&apos;];
patientVisitData[&apos;PV1.16&apos;][&apos;PV1.16.1&apos;] = msg[&apos;patient_visit_information&apos;][&apos;vip_indicator&apos;];

patientVisitData[&apos;PV1.17&apos;][&apos;PV1.17.1&apos;] = msg[&apos;patient_visit_information&apos;][&apos;admitting_doctor&apos;][&apos;doctor_id&apos;];
patientVisitData[&apos;PV1.17&apos;][&apos;PV1.17.2&apos;] = msg[&apos;patient_visit_information&apos;][&apos;admitting_doctor&apos;][&apos;family_name&apos;];
patientVisitData[&apos;PV1.17&apos;][&apos;PV1.17.3&apos;] = msg[&apos;patient_visit_information&apos;][&apos;admitting_doctor&apos;][&apos;given_name&apos;];
patientVisitData[&apos;PV1.17&apos;][&apos;PV1.17.4&apos;] = msg[&apos;patient_visit_information&apos;][&apos;admitting_doctor&apos;][&apos;middle_name&apos;];
patientVisitData[&apos;PV1.17&apos;][&apos;PV1.17.5&apos;] = msg[&apos;patient_visit_information&apos;][&apos;admitting_doctor&apos;][&apos;prefix_name&apos;];
patientVisitData[&apos;PV1.17&apos;][&apos;PV1.17.6&apos;] = msg[&apos;patient_visit_information&apos;][&apos;admitting_doctor&apos;][&apos;suffix_name&apos;];
patientVisitData[&apos;PV1.17&apos;][&apos;PV1.17.7&apos;] = msg[&apos;patient_visit_information&apos;][&apos;admitting_doctor&apos;][&apos;degree_name&apos;];

patientVisitData[&apos;PV1.18&apos;][&apos;PV1.18.1&apos;] = msg[&apos;patient_visit_information&apos;][&apos;patient_type&apos;];
patientVisitData[&apos;PV1.19&apos;][&apos;PV1.19.1&apos;] = msg[&apos;patient_visit_information&apos;][&apos;patient_visit_number&apos;];
patientVisitData[&apos;PV1.36&apos;][&apos;PV1.36.1&apos;] = msg[&apos;patient_visit_information&apos;][&apos;patient_discharge_disposition&apos;];
patientVisitData[&apos;PV1.44&apos;][&apos;PV1.44.1&apos;] = msg[&apos;patient_visit_information&apos;][&apos;patient_admit_date_time&apos;];
patientVisitData[&apos;PV1.45&apos;][&apos;PV1.45.1&apos;] = msg[&apos;patient_visit_information&apos;][&apos;patient_dsicharge_date_time&apos;];
patientVisitData[&apos;PV1.51&apos;][&apos;PV1.51.1&apos;] = msg[&apos;patient_visit_information&apos;][&apos;patient_visit_indicator&apos;];

var generatePatientVisit = generatePatientDemograhics.appendChild(patientVisitData);</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
          <name>AL1 mapping</name>
          <sequenceNumber>5</sequenceNumber>
          <script>var allergy_length = parseInt(msg[&apos;allergy_information&apos;].length);

for(j=0;j&lt;allergy_length;j++){
	
	var patientAllergy = new XML(&apos;&lt;AL1/&gt;&apos;);
	
	patientAllergy[&apos;AL1.1&apos;][&apos;AL1.1.1&apos;] = j+1;
	
	var allergy_code = msg[&apos;allergy_information&apos;][j][&apos;allergy_code_mnemonic&apos;].split(&apos;:&apos;);
	patientAllergy[&apos;AL1.3&apos;][&apos;AL1.3.1&apos;] = allergy_code[0];
	patientAllergy[&apos;AL1.3&apos;][&apos;AL1.3.2&apos;] = allergy_code[1];
	patientAllergy[&apos;AL1.3&apos;][&apos;AL1.3.3&apos;] = allergy_code[2];
	
	patientAllergy[&apos;AL1.4&apos;][&apos;AL1.4.1&apos;] = msg[&apos;allergy_information&apos;][j][&apos;allergy_severity&apos;];
	patientAllergy[&apos;AL1.5&apos;][&apos;AL1.5.1&apos;] = msg[&apos;allergy_information&apos;][j][&apos;allergy_reaction&apos;];
	patientAllergy[&apos;AL1.6&apos;][&apos;AL1.6.1&apos;] = msg[&apos;allergy_information&apos;][j][&apos;allergy_identification_date&apos;];
	
	var generateAllergyInfo = generatePatientVisit.appendChild(patientAllergy);
	
	var allergy_status = msg[&apos;allergy_information&apos;][j][&apos;allergy_status&apos;][&apos;status_indicator&apos;].split(&apos;:&apos;);
	
	if(allergy_status!=&apos;&apos;){
		var patientStatus = new XML(&apos;&lt;ZAL/&gt;&apos;);
		patientStatus[&apos;ZAL.1&apos;][&apos;ZAL.1.1&apos;]=allergy_status[0];
		patientStatus[&apos;ZAL.1&apos;][&apos;ZAL.1.2&apos;]=allergy_status[1];
		var generateAllergyStatus = generateAllergyInfo.appendChild(patientStatus);
	}
}

for(k=0;k&lt;allergy_length;k++){
	
}</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
          <name>DG1 mapping</name>
          <sequenceNumber>6</sequenceNumber>
          <script>var diagnosis_length = parseInt(msg[&apos;diagnosis_information&apos;].length);

for(k=0;k&lt;diagnosis_length;k++){

	var patientDiagnosis = new XML(&apos;&lt;DG1/&gt;&apos;);
	patientDiagnosis[&apos;DG1.1&apos;][&apos;DG1.1.1&apos;]= k+1;
	
	var diagnosis_code = msg[&apos;diagnosis_information&apos;][k][&apos;diagnosis_code&apos;].split(&apos;:&apos;);
	patientDiagnosis[&apos;DG1.3&apos;][&apos;DG1.3.1&apos;]= diagnosis_code[0];
	patientDiagnosis[&apos;DG1.3&apos;][&apos;DG1.3.2&apos;]= diagnosis_code[1];
	patientDiagnosis[&apos;DG1.3&apos;][&apos;DG1.3.3&apos;]= diagnosis_code[2];

	var related_group = msg[&apos;diagnosis_information&apos;][k][&apos;diagnostic_related_group&apos;].split(&apos;:&apos;);
	patientDiagnosis[&apos;DG1.8&apos;][&apos;DG1.8.1&apos;] = related_group[0];
	patientDiagnosis[&apos;DG1.8&apos;][&apos;DG1.8.2&apos;] = related_group[1];
	patientDiagnosis[&apos;DG1.8&apos;][&apos;DG1.8.3&apos;] = related_group[2];

	var generateDiagnosisInfo = generateAllergyInfo.appendChild(patientDiagnosis);
}</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
        <com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
          <sequenceNumber>7</sequenceNumber>
          <script>var messageData = SerializerFactory.getSerializer(&apos;HL7V2&apos;).fromXML(generatePatientVisit);
tmp.appendChild(generatePatientVisit);
delete tmp[&apos;MSH&apos;][0];</script>
        </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
      </elements>
      <inboundTemplate encoding="base64">ewoJInF1ZXJ5X3R5cGUiOiB7CgkJInF1ZXJ5X3JlcXVlc3RfdHlwZSI6ICJwaXh2Ml9pdGlfOCIK
CX0sCgkibWVzc2FnZV9pbmZvcm1hdGlvbiI6IHsKCQkic2VuZGVyX2FwcGxpY2F0aW9uIjogIkFQ
QURQVEFNRURfMTAwOTA5OCIsCgkJInNlbmRlcl9mYWNpbGl0eSI6ICJTQU5fREVJR08iLAoJCSJy
ZWNlaXZpbmdfYXBwbGljYXRpb24iOiAiSEVBTFRIWUxJTktOWS1JTkZPUkNTQyIsCgkJInJlY2Vp
dmluZ19mYWNpbGl0eSI6ICJIRUFMVEhZTElOS05ZIiwKCQkibWVzc2FnZV9kYXRlX3RpbWUiOiAi
MjAxODA3MjUiLAoJCSJtZXNzYWdlX2V2ZW50X3R5cGUiOiAiQTA0IiwKCQkibWVzc2FnZV9leHRl
bnNpb25faWQiOiAiMTAwOTI5OTI4ODc2MjI2NiIKCX0sCgkicGF0aWVudF9pbmZvcm1hdGlvbiI6
IHsKCQkicGF0aWVudF9pZCI6ICI4Nzg4OTAwOTA5LDEyODg5MDkiLAoJCSJhbHRlcm5hdGVfcGF0
aWVudF9pZCI6ICJSODk4ODk5ODk4IiwKCQkicGF0aWVudF9uYW1lIjogewoJCQkiZ2l2ZW5fbmFt
ZSI6ICJFUk5FU1QiLAoJCQkiZmFtaWx5X25hbWUiOiAiSkFDT0JWSUxMRSIsCgkJCSJtaWRkbGVf
bmFtZSI6ICJNIiwKCQkJInN1ZmZpeF9uYW1lIjogIiIsCgkJCSJwcmVmaXhfbmFtZSI6ICIiLAoJ
CQkiZGVncmVlX25hbWUiOiAiIgoJCX0sCgkJIm1vdGhlcnNfbWFpZGVuX25hbWUiOiAiSkVTU0lD
QSBBTEJBIiwKCQkiZGF0ZV9vZl9iaXJ0aCI6ICIxOTk0MDQwMSIsCgkJImdlbmRlciI6ICJNIiwK
CQkicGF0aWVudF9hZGRyZXNzIjogewoJCQkic3RyZWV0X2FkcmVzcyI6ICI3NzcgQnJvY2t0b24g
QXZlbnVlIiwKCQkJIm90aGVyX2lkZW50aWZpY2F0aW9ucyI6ICIiLAoJCQkiY2l0eSI6ICJBYmlu
Z3RvbiIsCgkJCSJzdGF0ZSI6ICJDQSIsCgkJCSJwb3N0YWxfY29kZSI6ICIyMzUxIiwKCQkJImNv
dW50cnkiOiAiVVMiLAoJCQkiYWRkcmVzc190eXBlIjogIkhPTUUiCgkJfSwKCQkicGF0aWVudF9s
YWd1YWdlIjogIlVTLUVOIiwKCQkicGF0aWVudF9tYXJpdGFsX3N0YXR1cyI6ICJNIiwKCQkicGF0
aWVudF9yZWxpZ2lvbiI6ICJBTUUiLAoJCSJwYXRpZW50X2FjY291bnRfbnVtYmVyIjogIjA5OTE5
OTAwNzc4MTE3IiwKCQkicGF0aWVudF9zc24iOiAiMTk5LTg4LTAwOTkiLAoJCSJwYXRpZW50X2V0
aGluaWNfZ3JvdXAiOiAiMjEzNS0yIiwKCQkicGF0aWVudF9jaXRpemVuc2hpcF9jb2RlIjogIiIs
CgkJInBhdGllbnRfZGVhdGhfZGF0ZV90aW1lIjogIiIsCgkJInBhdGllbnRfZGVhdGhfaW5kaWNh
dG9yIjogIiIKCX0sCgkicGF0aWVudF92aXNpdF9pbmZvcm1hdGlvbiI6IHsKCQkiZW5jb3VudGVy
X2lkIjogIjE5OTAwODgiLAoJCSJhc3NpbmdlZF9wYXRpZW50X2xvY2F0aW9uIjogIlBFRDozMDc6
QSIsCgkJImFkbWlzc2lvbl90eXBlIjogIkUiLAoJCSJhdHRlbmRpbmdfZG9jdG9yIjogewoJCQki
ZG9jdG9yX2lkIjogIjYwMDk5OCIsCgkJCSJmYW1pbHlfbmFtZSI6ICJTQU1JUiIsCgkJCSJnaXZl
bl9uYW1lIjogIkZBSEFEIiwKCQkJIm1pZGRsZV9uYW1lIjogIiIsCgkJCSJwcmVmaXhfbmFtZSI6
ICJKIiwKCQkJInN1ZmZpeF9uYW1lIjogInN1ZmZpeCBpZiBhbnkgbGlrZSBJLElJLElJSSIsCgkJ
CSJkZWdyZWVfbmFtZSI6ICJNLkQiCgkJfSwKCQkicmVmZXJyaW5nX2RvY3RvciI6IHsKCQkJImRv
Y3Rvcl9pZCI6ICI3OTkwMDgiLAoJCQkiZmFtaWx5X25hbWUiOiAiSEVOUlkiLAoJCQkiZ2l2ZW5f
bmFtZSI6ICJDSFJJU1RPUEhFUiIsCgkJCSJtaWRkbGVfbmFtZSI6ICJNIiwKCQkJInByZWZpeF9u
YW1lIjogIiIsCgkJCSJzdWZmaXhfbmFtZSI6ICJJSSIsCgkJCSJkZWdyZWVfbmFtZSI6ICIiCgkJ
fSwKCQkiY29uc3VsdGluZ19kb2N0b3IiOiB7CgkJCSJkb2N0b3JfaWQiOiAiMTIwMDk4IiwKCQkJ
ImZhbWlseV9uYW1lIjogIlZBU0NVRVoiLAoJCQkiZ2l2ZW5fbmFtZSI6ICJTRUxJTkEiLAoJCQki
bWlkZGxlX25hbWUiOiAiSk9TRVBIIiwKCQkJInByZWZpeF9uYW1lIjogIlIiLAoJCQkic3VmZml4
X25hbWUiOiAiIiwKCQkJImRlZ3JlZV9uYW1lIjogIiIKCQl9LAoJCSJob3NwaXRhbF9zZXJ2aWNl
IjogIkJlZCIsCgkJImFkbWl0X3NvdXJjZSI6ICI3IiwKCQkidmlwX2luZGljYXRvciI6ICJOIiwK
CQkiYWRtaXR0aW5nX2RvY3RvciI6IHsKCQkJImRvY3Rvcl9pZCI6ICIxODg5OTgiLAoJCQkiZmFt
aWx5X25hbWUiOiAiQUxQSE9OU0UiLAoJCQkiZ2l2ZW5fbmFtZSI6ICJNQVJJRSIsCgkJCSJtaWRk
bGVfbmFtZSI6ICIiLAoJCQkicHJlZml4X25hbWUiOiAiSyIsCgkJCSJzdWZmaXhfbmFtZSI6ICIi
LAoJCQkiZGVncmVlX25hbWUiOiAiTS5TIgoJCX0sCgkJInBhdGllbnRfdHlwZSI6ICJFIiwKCQki
cGF0aWVudF92aXNpdF9udW1iZXIiOiAiMTc3ODg4IiwKCQkicGF0aWVudF9kaXNjaGFyZ2VfZGlz
cG9zaXRpb24iOiAiMDciLAoJCSJwYXRpZW50X3NlcnZpY2luZ19mYWNpbGl0eSI6ICIiLAoJCSJw
YXRpZW50X2FkbWl0X2RhdGVfdGltZSI6ICIyMDE4MDYxMTE1MjY0NCIsCgkJInBhdGllbnRfZGlz
Y2hhcmdlX2RhdGVfdGltZSI6ICIyMDE4MDcyMTEzMzM0OSIsCgkJInBhdGllbnRfdmlzaXRfaW5k
aWNhdG9yIjogIlYiCgl9LAoJImFkZGl0aW9uYWxfdmlzaXRfaW5mb3JtYXRpb24iOiB7CgkJImFj
Y29tb2RhdGlvbl9jb2RlIjogIiIsCgkJImFkbWl0X3JlYXNvbiI6ICJBQjEwMiIsCgkJImV4cGVj
dGVkX2FkbWl0X2RhdGUiOiAiMjAxMTA5MDYiLAoJCSJleHBlY3RlZF9kaXNjaGFyZ2VfZGF0ZSI6
ICIyMDEyMDIwOCIsCgkJInZpc2l0X3B1YmxpY2l0eV9jb2RlIjogIkYiLAoJCSJ2aXNpdF9wcm90
ZWN0aW9uX2NvZGUiOiAiWSIKCX0sCgkicGF0aWVudF9kZW1vZ3JhcGhpY3NfaW5mb3JtYXRpb24i
OiB7CgkJInBhdGllbnRfcHJpbWFyeV9mYWNpbGl0eSI6ICJTVFBFVEVSU0JVUkc6MDk5MTA6QUJW
QzIyMyIsCgkJInBhdGllbnRfcHJpbWFyeV9jYXJlX3Byb3ZpZGVyIjogewoJCQkiY2FyZV9wcm92
aWRlcl9pZCI6IjEwMDI5MiIsCgkJCSJmYW1pbHlfbmFtZSI6ICJKQUNPQiIsCgkJCSJnaXZlbl9u
YW1lIjogIkVTU0FJQUgiLAoJCQkibWlkZGxlX25hbWUiOiAiTUVMTk9MWSIsCgkJCSJwcmVmaXhf
bmFtZSI6ICIiLAoJCQkic3VmZml4X25hbWUiOiAiIiwKCQkJImRlZ3JlZV9uYW1lIjogIiIKCQl9
LAoJCSJwYXRpZW50X2lzX2hhbmRpY2FwIjogIlkiLAoJCSJwYXRpZW50X3Byb3RlY3Rpb25faW5k
aWNhdG9yIjogIlkiCgl9LAoJInBhdGllbnRfbmV4dF9vZl9raW4iOiBbCgkJewoJCQkicGF0aWVu
dF9jb250YWN0X3BlcnNvbl9uYW1lIjogewoJCQkJImZhbWlseV9uYW1lIjogIkpBQ0siLAoJCQkJ
ImdpdmVuX25hbWUiOiAiU0NIWU5ERVIiLAoJCQkJIm1pZGRsZV9uYW1lIjogIktZTEUiLAoJCQkJ
InByZWZpeF9uYW1lIjogIiIsCgkJCQkic3VmZml4X25hbWUiOiAiIiwKCQkJCSJkZWdyZWVfbmFt
ZSI6ICIiCgkJCX0sCgkJCSJwYXRpZW50X3JlbGF0aW9uc2hpcCI6ICIiLAoJCQkicGF0aWVudF9j
b250YWN0X3BlcnNvbl9hZGRyZXNzIjogewoJCQkJInN0cmVldF9hZHJlc3MiOiAiMTIwMCBOIEVM
TSBTVFJFRVQiLAoJCQkJIm90aGVyX2lkZW50aWZpY2F0aW9ucyI6ICIiLAoJCQkJImNpdHkiOiAi
R1JFRU5TQk9STyIsCgkJCQkic3RhdGUiOiAiTkMiLAoJCQkJInBvc3RhbF9jb2RlIjogIjI3NDAx
4oCRMTAyMCIsCgkJCQkiY291bnRyeSI6ICJVUyIsCgkJCQkiYWRkcmVzc190eXBlIjogIiIKCQkJ
fSwKCQkJInBob25lX251bWJlciI6IHsKCQkJCSJob21lX3Bob25lIjogIigxMjMpNDU2LTc4OTAi
LAoJCQkJIndvcmtfcGhvbmUiOiAiKDEyMyk0NTYtNzg5MCIKCQkJfSwKCQkJInN0YXJ0X2RhdGVf
b2ZfY29udGFjdCI6ICIxOTk0MDkwOCIsCgkJCSJlbmRfZGF0ZV9vZl9jb250YWN0IjogIiIsCgkJ
CSJwYXRpZW50X2NvbnRhY3RfcGVyc29uX2dlbmRlciI6ICJNIiwKCQkJInBhdGllbnRfY29udGFj
dF9wZXJzb25fbGFuZ3VhZ2UiOiAiRU46RU5HTElTSDowMzYiCgkJfQoJXSwKCSJhbGxlcmd5X2lu
Zm9ybWF0aW9uIjogWwoJCXsKCQkJImFsbGVyZ3lfY29kZV9tbmVtb25pYyI6ICIwMDc4MTI2MTM3
NjpBbW94aWNpbGxpbiIsCgkJCSJhbGxlcmd5X3NldmVyaXR5IjogIlNWIiwKCQkJImFsbGVyZ3lf
cmVhY3Rpb24iOiAiUmFzaGVzIiwKCQkJImFsbGVyZ3lfaWRlbnRpZmljYXRpb25fZGF0ZSI6ICIy
MDEyMDkwOSIsCgkJCSJhbGxlcmd5X3N0YXR1cyI6IHsKCQkJCSJzdGF0dXNfaW5kaWNhdG9yIjog
IkE6QWN0aXZlIgoJCQl9CgkJfQoJXSwKCSJkaWFnbm9zaXNfaW5mb3JtYXRpb24iOiBbCgkJewoJ
CQkiZGlhZ25vc2lzX2NvZGUiOiAiNzg0LjA6SEVBREFDSEU6STkiLAoJCQkiZGlhZ25vc3RpY19y
ZWxhdGVkX2dyb3VwIjogIjU2NDpIRUFEQUNIRTpEUkciCgkJfQoJXSwKCSJpbnN1cmFuY2VfaW5m
b3JtYXRpb24iOiBbCgkJewoJCQkiaW5zdXJhbmNlX3BsYW5faWQiOiAiMTU6VHVmdHMgQmFzaWMi
LAoJCQkiaW5zdXJhbmNlX2NvbXBhbnlfaWQiOiAiMTIwIiwKCQkJImluc3VyYW5jZV9jb21wYW55
X25hbWUiOiAiQWV0bmEiLAoJCQkiaW5zdXJhbmNlX2NvbXBhbnlfYWRkcmVzcyI6IHsKCQkJCSJz
dHJlZXRfYWRyZXNzIjogIjQ4ODggTiBKQUNPQlNPTiBTVFJFRVQiLAoJCQkJIm90aGVyX2lkZW50
aWZpY2F0aW9ucyI6ICIiLAoJCQkJImNpdHkiOiAiU0FORElFR08iLAoJCQkJInN0YXRlIjogIlNO
IiwKCQkJCSJwb3N0YWxfY29kZSI6ICIyNzQwMeKAkTEwMjAiLAoJCQkJImNvdW50cnkiOiAiVVMi
LAoJCQkJImFkZHJlc3NfdHlwZSI6ICIiCgkJCX0sCgkJCSJpbnN1cmFuY2VfY29udGFjdF9wZXJz
b24iOiB7CgkJCQkiZmFtaWx5X25hbWUiOiAiQkFLRVIiLAoJCQkJImdpdmVuX25hbWUiOiAiU0lN
T04iLAoJCQkJIm1pZGRsZV9uYW1lIjogIlNFQkFTVElORSIsCgkJCQkicHJlZml4X25hbWUiOiAi
IiwKCQkJCSJzdWZmaXhfbmFtZSI6ICIiLAoJCQkJImRlZ3JlZV9uYW1lIjogIiIKCQkJfSwKCQkJ
Imluc3VyYW5jZV9jb250YWN0X251bWJlciI6ICIyMTItNTU1LTEyMTIiLAoJCQkiaW5zdXJhbmNl
X2dyb3VwX251bWJlciI6ICIxMjM0NSIsCgkJCSJpbnN1cmFuY2VfZ3JvdXBfbmFtZSI6ICIiLAoJ
CQkicGxhbl9lZmZlY3RpdmVfZGF0ZSI6ICIyMDExMDkwOCIsCgkJCSJwbGFuX2V4cGlyYXRpb25f
ZGF0ZSI6ICIyMDIxMDkwOCIsCgkJCSJhdXRob3JpemF0aW9uX2luZm9ybWF0aW9uIjogIjAwMDEy
ODM3NzciLAoJCQkibmFtZV9vZl9pbnN1cmVkIjogIiIsCgkJCSJpbnN1cmVkX3JlbGF0aW9uc2hp
cCI6ICIiLAoJCQkiaW5zdXJlZF9kYXRlX29mX2JpcnRoIjogIiIsCgkJCSJpbnN1cmVkX2FkZHJl
c3MiOiB7CgkJCQkic3RyZWV0X2FkcmVzcyI6ICI0NDc3NzggWU4gU1VEQU4gU1VCU1RSRUVUIiwK
CQkJCSJvdGhlcl9pZGVudGlmaWNhdGlvbnMiOiAiIiwKCQkJCSJjaXR5IjogIlNBTiBBTlRPTklP
IiwKCQkJCSJzdGF0ZSI6ICJUWCIsCgkJCQkicG9zdGFsX2NvZGUiOiAiMjc0MDHigJExMDIwIiwK
CQkJCSJjb3VudHJ5IjogIlVTIiwKCQkJCSJhZGRyZXNzX3R5cGUiOiAiIgoJCQl9LAoJCQkiY29v
cmRfb2ZfYmVuZWZpdHMiOiAiIiwKCQkJImNvb3JkX29mX2JlbmVmaXRfcHJpb3JpdHkiOiAiIiwK
CQkJImNvbXBhbnlfcGxhbl9jb2RlIjogIjEyMzQ1IiwKCQkJInBvbGljeV9udW1iZXIiOiAiWDEy
MzQwMDExIiwKCQkJInBvbGljeV9kZWR1Y3RibGUiOiAiMTAuMDAiLAoJCQkiaW5zdXJlZF9lbXBs
b3llZV9zdGF0dXMiOiAiIiwKCQkJImluc3VyZWRfZ2VuZGVyIjogIiIsCgkJCSJpbnN1cmVkX2Vt
cGxveWVlX2FkZHJlc3MiOiB7CgkJCQkic3RyZWV0X2FkcmVzcyI6ICIyMzQ1IFIgSU5UUlVETyBT
VFJFRVQiLAoJCQkJIm90aGVyX2lkZW50aWZpY2F0aW9ucyI6ICIiLAoJCQkJImNpdHkiOiAiQk9T
VE9OIiwKCQkJCSJzdGF0ZSI6ICJTTiIsCgkJCQkicG9zdGFsX2NvZGUiOiAiMjc0MDHigJExMDIw
IiwKCQkJCSJjb3VudHJ5IjogIlVTIiwKCQkJCSJhZGRyZXNzX3R5cGUiOiAiIgoJCQl9LAoJCQki
aW5zdXJlZF9zc24iOiAiMTIzLTQ1LTY3ODkiLAoJCQkiaW5zdXJlZF9lbXBsb3llcl9uYW1lIjog
IldhbE1hcnQiCgkJfQoJXSwKCSJwYXRpZW50X21lcmdlX2luZm9ybWF0aW9uIjogewoJCSJwYXRp
ZW50X2lkIjogIiIsCgkJImFsdGVybmF0ZV9wYXRpZW50X2lkIjogIiIsCgkJInByaW9yX3BhdGll
bnRfYWNjb3VudF9udW1iZXIiOiAiIiwKCQkicHJpb3JfcGF0aWVudF9uYW1lIjogIiIKCX0KfQo=
</inboundTemplate>
      <outboundTemplate encoding="base64">TVNIfF5+XCY=</outboundTemplate>
      <inboundDataType>JSON</inboundDataType>
      <outboundDataType>HL7V2</outboundDataType>
      <inboundProperties class="com.mirth.connect.plugins.datatypes.json.JSONDataTypeProperties" version="3.5.2">
        <batchProperties class="com.mirth.connect.plugins.datatypes.json.JSONBatchProperties" version="3.5.2">
          <splitType>JavaScript</splitType>
          <batchScript></batchScript>
        </batchProperties>
      </inboundProperties>
      <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.5.2">
        <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.5.2">
          <handleRepetitions>true</handleRepetitions>
          <handleSubcomponents>true</handleSubcomponents>
          <useStrictParser>false</useStrictParser>
          <useStrictValidation>false</useStrictValidation>
          <stripNamespaces>true</stripNamespaces>
          <segmentDelimiter>\r</segmentDelimiter>
          <convertLineBreaks>true</convertLineBreaks>
        </serializationProperties>
        <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.5.2">
          <useStrictParser>false</useStrictParser>
          <useStrictValidation>false</useStrictValidation>
          <segmentDelimiter>\r</segmentDelimiter>
        </deserializationProperties>
        <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.5.2">
          <splitType>MSH_Segment</splitType>
          <batchScript></batchScript>
        </batchProperties>
        <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.5.2">
          <segmentDelimiter>\r</segmentDelimiter>
          <successfulACKCode>AA</successfulACKCode>
          <successfulACKMessage></successfulACKMessage>
          <errorACKCode>AE</errorACKCode>
          <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
          <rejectedACKCode>AR</rejectedACKCode>
          <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
          <msh15ACKAccept>false</msh15ACKAccept>
          <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
        </responseGenerationProperties>
        <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.5.2">
          <successfulACKCode>AA,CA</successfulACKCode>
          <errorACKCode>AE,CE</errorACKCode>
          <rejectedACKCode>AR,CR</rejectedACKCode>
          <validateMessageControlId>true</validateMessageControlId>
          <originalMessageControlId>Destination_Encoded</originalMessageControlId>
          <originalIdMapVariable></originalIdMapVariable>
        </responseValidationProperties>
      </outboundProperties>
    </transformer>
    <filter version="3.5.2">
      <elements/>
    </filter>
    <transportName>Channel Reader</transportName>
    <mode>SOURCE</mode>
    <enabled>true</enabled>
    <waitForPrevious>true</waitForPrevious>
  </sourceConnector>
  <destinationConnectors>
    <connector version="3.5.2">
      <metaDataId>1</metaDataId>
      <name>Destination 1</name>
      <properties class="com.mirth.connect.connectors.vm.VmDispatcherProperties" version="3.5.2">
        <pluginProperties/>
        <destinationConnectorProperties version="3.5.2">
          <queueEnabled>false</queueEnabled>
          <sendFirst>false</sendFirst>
          <retryIntervalMillis>10000</retryIntervalMillis>
          <regenerateTemplate>false</regenerateTemplate>
          <retryCount>0</retryCount>
          <rotate>false</rotate>
          <includeFilterTransformer>false</includeFilterTransformer>
          <threadCount>1</threadCount>
          <threadAssignmentVariable></threadAssignmentVariable>
          <validateResponse>false</validateResponse>
          <resourceIds class="linked-hash-map">
            <entry>
              <string>Default Resource</string>
              <string>[Default Resource]</string>
            </entry>
          </resourceIds>
          <queueBufferSize>1000</queueBufferSize>
          <reattachAttachments>true</reattachAttachments>
        </destinationConnectorProperties>
        <channelId>none</channelId>
        <channelTemplate>${message.encodedData}</channelTemplate>
        <mapVariables/>
      </properties>
      <transformer version="3.5.2">
        <elements/>
        <inboundDataType>HL7V2</inboundDataType>
        <outboundDataType>HL7V2</outboundDataType>
        <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.5.2">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.5.2">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.5.2">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.5.2">
            <splitType>MSH_Segment</splitType>
            <batchScript></batchScript>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.5.2">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage></successfulACKMessage>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.5.2">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable></originalIdMapVariable>
          </responseValidationProperties>
        </inboundProperties>
        <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.5.2">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.5.2">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.5.2">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.5.2">
            <splitType>MSH_Segment</splitType>
            <batchScript></batchScript>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.5.2">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage></successfulACKMessage>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.5.2">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable></originalIdMapVariable>
          </responseValidationProperties>
        </outboundProperties>
      </transformer>
      <responseTransformer version="3.5.2">
        <elements/>
        <inboundDataType>HL7V2</inboundDataType>
        <outboundDataType>HL7V2</outboundDataType>
        <inboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.5.2">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.5.2">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.5.2">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.5.2">
            <splitType>MSH_Segment</splitType>
            <batchScript></batchScript>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.5.2">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage></successfulACKMessage>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.5.2">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable></originalIdMapVariable>
          </responseValidationProperties>
        </inboundProperties>
        <outboundProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DataTypeProperties" version="3.5.2">
          <serializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2SerializationProperties" version="3.5.2">
            <handleRepetitions>true</handleRepetitions>
            <handleSubcomponents>true</handleSubcomponents>
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <stripNamespaces>true</stripNamespaces>
            <segmentDelimiter>\r</segmentDelimiter>
            <convertLineBreaks>true</convertLineBreaks>
          </serializationProperties>
          <deserializationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2DeserializationProperties" version="3.5.2">
            <useStrictParser>false</useStrictParser>
            <useStrictValidation>false</useStrictValidation>
            <segmentDelimiter>\r</segmentDelimiter>
          </deserializationProperties>
          <batchProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2BatchProperties" version="3.5.2">
            <splitType>MSH_Segment</splitType>
            <batchScript></batchScript>
          </batchProperties>
          <responseGenerationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseGenerationProperties" version="3.5.2">
            <segmentDelimiter>\r</segmentDelimiter>
            <successfulACKCode>AA</successfulACKCode>
            <successfulACKMessage></successfulACKMessage>
            <errorACKCode>AE</errorACKCode>
            <errorACKMessage>An Error Occurred Processing Message.</errorACKMessage>
            <rejectedACKCode>AR</rejectedACKCode>
            <rejectedACKMessage>Message Rejected.</rejectedACKMessage>
            <msh15ACKAccept>false</msh15ACKAccept>
            <dateFormat>yyyyMMddHHmmss.SSS</dateFormat>
          </responseGenerationProperties>
          <responseValidationProperties class="com.mirth.connect.plugins.datatypes.hl7v2.HL7v2ResponseValidationProperties" version="3.5.2">
            <successfulACKCode>AA,CA</successfulACKCode>
            <errorACKCode>AE,CE</errorACKCode>
            <rejectedACKCode>AR,CR</rejectedACKCode>
            <validateMessageControlId>true</validateMessageControlId>
            <originalMessageControlId>Destination_Encoded</originalMessageControlId>
            <originalIdMapVariable></originalIdMapVariable>
          </responseValidationProperties>
        </outboundProperties>
      </responseTransformer>
      <filter version="3.5.2">
        <elements/>
      </filter>
      <transportName>Channel Writer</transportName>
      <mode>DESTINATION</mode>
      <enabled>true</enabled>
      <waitForPrevious>true</waitForPrevious>
    </connector>
  </destinationConnectors>
  <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
  <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
  <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
  <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
  <properties version="3.5.2">
    <clearGlobalChannelMap>true</clearGlobalChannelMap>
    <messageStorageMode>DEVELOPMENT</messageStorageMode>
    <encryptData>false</encryptData>
    <removeContentOnCompletion>false</removeContentOnCompletion>
    <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
    <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
    <initialState>STARTED</initialState>
    <storeAttachments>false</storeAttachments>
    <metaDataColumns>
      <metaDataColumn>
        <name>SOURCE</name>
        <type>STRING</type>
        <mappingName>mirth_source</mappingName>
      </metaDataColumn>
      <metaDataColumn>
        <name>TYPE</name>
        <type>STRING</type>
        <mappingName>mirth_type</mappingName>
      </metaDataColumn>
    </metaDataColumns>
    <attachmentProperties version="3.5.2">
      <type>None</type>
      <properties/>
    </attachmentProperties>
    <resourceIds class="linked-hash-map">
      <entry>
        <string>Default Resource</string>
        <string>[Default Resource]</string>
      </entry>
    </resourceIds>
  </properties>
  <exportData>
    <metadata>
      <enabled>true</enabled>
      <lastModified>
        <time>1532634775704</time>
        <timezone>Asia/Calcutta</timezone>
      </lastModified>
      <pruningSettings>
        <archiveEnabled>true</archiveEnabled>
      </pruningSettings>
    </metadata>
  </exportData>
</channel>